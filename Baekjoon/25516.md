### 거리가 k이하인 트리 노드에서 사과 수확하기

```python
import sys
input = sys.stdin.readline

n, k = map(int, input().split())
tree = [[] for _ in range(n)]
for _ in range(n-1):
    p, c = map(int, input().split())
    tree[p].append(c)
apple = list(map(int, input().split()))

stack = []
stack.append([0, 0])   # 노드 번호, 거리
visited = [0]*n
answer = 0   # 수확할 수 있는 사과의 개수
while stack:
    s = stack.pop(0)

    if apple[s[0]] and s[1] <= k:
        answer += 1
    visited[s[0]] = 1
    if tree[s[0]]:
        for t in tree[s[0]]:
                if not visited[t]:
                    stack.append([t, s[1]+1])

print(answer)
```

